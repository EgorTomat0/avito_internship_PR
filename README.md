# üöÄ –°—Ç–∞–∂–∏—Ä–æ–≤–∫–∞ –ê–≤–∏—Ç–æ, —Å–µ—Ä–≤–∏—Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≤—å—é–µ—Ä–æ–≤ –¥–ª—è Pull Request'–æ–≤

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [üöÄ –°—Ç–∞–∂–∏—Ä–æ–≤–∫–∞ –ê–≤–∏—Ç–æ, —Å–µ—Ä–≤–∏—Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≤—å—é–µ—Ä–æ–≤ –¥–ª—è Pull Request'–æ–≤](#-—Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∞-–∞–≤–∏—Ç–æ-—Å–µ—Ä–≤–∏—Å-–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è-—Ä–µ–≤—å—é–µ—Ä–æ–≤-–¥–ª—è-pull-request–æ–≤)
    - [üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ](#-–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ)
    - [üéØ Quick Start](#-quick-start)
        - [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
    - [üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
        - [–û–ø–∏—Å–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–æ–ø–∏—Å–∞–Ω–∏–µ-–∫–ª—é—á–µ–≤—ã—Ö-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
    - [‚ö° –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ K6](#-–Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–ø—Ä–∏-–ø–æ–º–æ—â–∏-k6)
        - [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∞](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-—Ç–µ—Å—Ç–∞)
        - [–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

## üéØ Quick start

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
git clone https://github.com/EgorTomat0/avito_internship_PR

cd avito_internship_PR
```
```bash
docker compose up
```
–ò–ª–∏
```bash
task up:docker-compose
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8080

### –õ–æ–∫–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å Taskfile
````bash
#–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞ –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
task lint
````
````bash
#–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∞–º–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
task up:local
````
````bash
#–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å –ø–æ–º–æ—â—å—é docker compose
task up:docker-compose
````

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```markdown
avito_internship_PR/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ main.go                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/             # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≤ —Ç–æ–º —á–∏—Å–ª–µ –¥–ª—è GORM –∞–≤—Ç–æ–º–∏–≥—Ä–∞—Ü–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ postgres.go         # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ error/                  # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ router/                 # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä HTTP, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π(–Ω–µ —É—Å–ø–µ–ª
|   |                             –ø–æ–¥–∫–ª—é—á–∏—Ç—å DI :( )
‚îÇ   ‚îú‚îÄ‚îÄ pr/                     # –§–∏—á–∞ Pull Request
‚îÇ   ‚îú‚îÄ‚îÄ team/                   # –§–∏—á–∞ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îî‚îÄ‚îÄ user/                   # –§–∏—á–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ docker-compose.yaml         
‚îú‚îÄ‚îÄ Dockerfile                  
‚îî‚îÄ‚îÄ .env                        # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

### –û–ø–∏—Å–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `application/` - DTO, request/response, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã
- `infrastructure/` - HTTP –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- `usecase/` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## ‚ö° –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ K6

–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–∏–ª–æ—Å—å —Å –ø–æ–º–æ—â—å—é **K6** –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ API endpoints.

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∞

``./load_testing/test.js``

```javascript
export const options = {
    stages: [
        {duration: '1m', target: 100},
        {duration: '1m', target: 100},
        {duration: '2m', target: 300},
        {duration: '1m', target: 150},
    ],
    thresholds: {
        http_req_failed: ['rate<0.01'],
        http_req_duration: ['p(95)<301'],
        checks: ['rate>0.95'],
    },
};
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
``./load_testing/test_result.txt``

```
  ‚ñà TOTAL RESULTS 

    checks_total.......: 182456  602.09739/s
    checks_succeeded...: 100.00% 182456 out of 182456
    checks_failed......: 0.00%   0 out of 182456

    ‚úì status is 201
    ‚úì response has team data
    ‚úì team name matches
    ‚úì response time acceptable
    ‚úì has correct content type
    ‚úì team structure is correct
    ‚úì members have UUID v4 format
    ‚úì members have required fields

    HTTP
    http_req_duration..............: avg=45.52ms min=17.27ms med=39.72ms max=412.88ms p(90)=68.92ms p(95)=88.24ms
      { expected_response:true }...: avg=45.52ms min=17.27ms med=39.72ms max=412.88ms p(90)=68.92ms p(95)=88.24ms
    http_req_failed................: 0.00% 0 out of 22807
    http_reqs......................: 22807 75.262174/s

    EXECUTION
    iteration_duration.............: avg=2.05s   min=1.01s   med=2.04s   max=3.33s    p(90)=3.04s   p(95)=3.06s  
    iterations.....................: 22807 75.262174/s
    vus............................: 2     min=2          max=300
    vus_max........................: 300   min=300        max=300

    NETWORK
    data_received..................: 13 MB 44 kB/s
    data_sent......................: 13 MB 43 kB/s




running (5m03.0s), 000/300 VUs, 22807 complete and 0 interrupted iterations
default ‚úì [ 100% ] 000/300 VUs  5m0s
```

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- ‚úÖ **95-–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å** –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞: **88.24ms**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π **300**
- ‚úÖ –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: **45.52ms**